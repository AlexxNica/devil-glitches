(function(){function sa(b,a){return Math.atan2(a[1]-b[1],a[0]-b[0])}function Ba(b,a){return Math.sqrt(b*b+a*a)}function Z(b){var a;a=f.VERTEX_SHADER;a=f.createShader(a);f.shaderSource(a,"attribute vec2 p;varying vec2 uv;void main(){gl_Position=vec4(p,0.0,1.0);uv=0.5*(p+1.0);}");f.compileShader(a);var e=a;a=f.FRAGMENT_SHADER;a=f.createShader(a);f.shaderSource(a,b);f.compileShader(a);b=f.createProgram();f.attachShader(b,e);f.attachShader(b,a);f.linkProgram(b);f.useProgram(b);e=f.getAttribLocation(b,
"p");f.enableVertexAttribArray(e);f.vertexAttribPointer(e,2,f.FLOAT,!1,0,0);return[b]}function fa(b){f.useProgram(b[0])}function x(b,a){return b[a]||(b[a]=f.getUniformLocation(b[0],a))}function Ma(){var b=f.createTexture();f.bindTexture(f.TEXTURE_2D,b);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);return b}
function O(b){f.activeTexture(f.TEXTURE0+0);f.bindTexture(f.TEXTURE_2D,b);return 0}function Na(){var b=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,b);var a=Ma();f.texImage2D(f.TEXTURE_2D,0,f.RGBA,z,E,0,f.RGBA,f.UNSIGNED_BYTE,null);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,a,0);return[b,a]}function P(b){f.bindFramebuffer(f.FRAMEBUFFER,b[0])}function Za(){this.T=function(b){for(var a=0;24>a;a++)this[String.fromCharCode(97+a)]=b[a]||0;.01>this.c&&(this.c=.01);b=
this.b+this.c+this.e;.18>b&&(b=.18/b,this.b*=b,this.c*=b,this.e*=b)}}function $a(b,a,e){Ca.F.T(b);var f=Ca.V();b=new Uint8Array(4*((f+1)/2|0)+44);var f=2*Ca.U(new Uint16Array(b.buffer,44),f),h=new Uint32Array(b.buffer,0,44);h[0]=1179011410;h[1]=f+36;h[2]=1163280727;h[3]=544501094;h[4]=16;h[5]=65537;h[6]=44100;h[7]=88200;h[8]=1048578;h[9]=1635017060;h[10]=f;f+=44;for(h=0;h<f;h+=3);a&&a.decodeAudioData(b.buffer,e)}function I(b){b=b.split(ab);this.frequency=I.M(b[0])||0;this.duration=I.L(b[1])||0}function A(b,
a,e){this.C=b||new ta;this.J();this.I=a||120;this.loop=!0;this.D=this.H=0;this.B=[];this.push.apply(this,e||[])}function Da(b,a,q,f,h){e.save();e.beginPath();e.strokeStyle=h;for(h=0;h<b.length;h++){var l=bb["0123456789?abcdefghijklmnopqrstuvwxyz .-'".indexOf(b[h])],m=shakeScreen[0]+a-(f+10)*(b.length-h),p=shakeScreen[1]+q,k=f;l&1&&(e.moveTo(m+2,p-1),e.lineTo(k+m-2,p-1));l&2&&(e.moveTo(k+m+1,p),e.lineTo(k+m+1,k+p-1));l&4&&(e.moveTo(k+m+1,k+p+1),e.lineTo(k+m+1,2*k+p));l&8&&(e.moveTo(m+2,2*k+p+1),e.lineTo(k+
m-2,2*k+p+1));l&16&&(e.moveTo(m-1,p+k+1),e.lineTo(m-1,p+2*k));l&32&&(e.moveTo(m-1,p),e.lineTo(m-1,k+p-1));l&64&&(e.moveTo(m+2,k+p),e.lineTo(m+k/2-2,k+p));l&128&&(e.moveTo(m+2,p+2),e.lineTo(m+k/2-2,k+p-2));l&256&&(e.moveTo(k/2+m,p+2),e.lineTo(k/2+m,k+p-2));l&512&&(e.moveTo(k/2+m+2,k+p-2),e.lineTo(k+m-2,p+2));l&1024&&(e.moveTo(k/2+m+2,k+p),e.lineTo(k+m-2,k+p));l&2048&&(e.moveTo(k/2+m+2,k+p+2),e.lineTo(k+m-2,2*k+p-2));l&4096&&(e.moveTo(k/2+m,k+p+2),e.lineTo(k/2+m,2*k+p-2));l&8192&&(e.moveTo(m+2,2*k+
p-2),e.lineTo(k/2+m-2,k+p+2))}e.closePath();e.stroke();e.restore()}function ga(b,a,e,f,h){a+=(f+10)*b.length/2;Da(b,a,e,f,h)}function Oa(b){return Math.round(b[0]/84)+"-"+Math.round(b[1]/84)}function Ea(b){for(var a={},e,f=0;9>f;f++)if(e=Oa([b[0]+84*(f%3-1),b[1]+84*(~~(f/3)-1)]),!a[e])for(a[e]=1,e=la[e],f=0;e&&f<e.length;f++)if(Ba(b[1]-e[f][1],b[0]-e[f][0])<e[f][2]+b[2])return e[f]}function Pa(b,a){for(var e=[],f=0;f<a;f++){var h=b.slice();h[5]=.05*(f-a/2)+b[5];e.push(Q(h))}return e}function Qa(b,
a){var e=R([b[0]+10*Math.cos(Math.PI*a/3),b[1]+10*Math.sin(Math.PI*a/3),4]);e[13]=b;e[9]=sa(e,b);e[3]=e[9]+b[11];e[15]=0;e[16]=0;D.push(e)}function R(b){b=b.slice(0,2).concat(cb[b[2]].slice(0));if(12==b[5]||14==b[5])for(var a=0;6>a;a++)Qa(b,a);return b}function db(b){if(.99<b)return 1;var a=1/b;return 100*b%a>a/2?1:0}function ha(b,a){return b?Math.random()*a*2-a:0}function Fa(b,a,f){e.moveTo(b[0]*f,a[0]*f);for(var h=1;h<b.length;h++)e.lineTo(b[h]*f,a[h]*f);e.lineTo(b[0]*f,a[0]*f)}function Ga(b,a,
e,f,h,l,m){return"rgba("+(~~(Math.random()*b)+a)+","+(~~(Math.random()*e)+f)+","+(~~(Math.random()*h)+l)+","+(~~(0*Math.random())+m)+")"}function Ra(b){ua||(ua=b);dt=Math.min(100,b-ua)/1E3;ua=b;Ha++;if(0>B[6]){b=dt;if(!J){t=b*h[4]*(0<h[8]?.3:1);var a=b*h[4]*(0<h[8]?1.4:1);F[Math.round(h[1]/40)]&&1==F[Math.round(h[1]/40)][Math.round(h[0]/40)]&&(a-=.5);ia&S[65]&&(h[0]-=a,h[0]<h[2]&&(h[0]=h[2]),h[0]>n[2]&&h[0]<840-n[2]&&(n[0]+=a));ia&S[87]&&(h[1]-=a,h[1]<h[2]&&(h[1]=h[2]),h[1]>n[3]&&h[1]<840-n[3]&&(n[1]+=
a));ia&S[83]&&(h[1]+=a,h[1]>840-h[2]&&(h[1]=840-h[2]),h[1]>n[3]&&h[1]<840-n[3]&&(n[1]-=a));ia&S[68]&&(h[0]+=a,h[0]>840-h[2]&&(h[0]=840-h[2]),h[0]>n[2]&&h[0]<840-n[2]&&(n[0]-=a));h[3]=sa([h[0]+n[0],h[1]+n[1]],C);if(Ea(h)){K(eb);for(a=-10;10>a;a++)ja.push([h[0],h[1],h[2]+Sa*a*Math.random(),100]);Ia=[[],[]];J=!0;aa.stop();ba.stop();L.stop();T.stop()}C[2]&&0>=h[6]&&0>=h[8]?(ca.push([h[0]+ha(1,2+h[7]/30),h[1]+ha(1,2+h[7]/30),2,h[3]+ha(1,.05+.001*h[7])]),K(Ta[~~(Math.random()*Ta.length)]),h[6]=1/h[7]):
h[6]-=b;C[3]&&0>=h[8]&&0>=h[9]?(K(fb),h[8]=.55,h[9]=1.2):(h[8]-=b,h[9]-=b)}b=ca.length-1;for(;0<=b;b--)if(a=ca[b],a[0]+=Math.cos(a[3])*t*a[2],a[1]+=Math.sin(a[3])*t*a[2],(-20>a[0]||860<a[0]||-20>a[1]||860<a[1])&&ca.splice(b,1),a=Ea(a))ca.splice(b,1),--a[6],a[4]=200,5<a[5]&&K(Ua[~~(Math.random()*Ua.length)]);for(b=0;b<ja.length;b++)a=ja[b],a[0]+=Math.cos(a[2])*(2+3*Math.random()),a[1]+=Math.sin(a[2])*(2+3*Math.random()),0>--a[3]&&ja.splice(b,1);la={};for(b=D.length-1;0<=b;b--)a:{var a=D[b],q=b;if(0>=
a[6]){if(D.splice(q,1),5!=a[5]){for(q=-10;10>q;q++)ja.push([a[0],a[1],a[2]+Sa*q*Math.random(),100]);if(9<a[5]){for(var q=a[0],y=a[1],a=a[10],u=~~(q/40),l=~~(y/40),m=Math.ceil(a/40),p=l-m;p<l+m;p++)if("undefined"!=typeof F[p])for(var k=u-m;k<u+m;k++)if(1==F[p][k]||Ba(40*(p+.5)-y,40*(k+.5)-q)<=a)F[p][k]=0;K(gb)}else K(hb)}}else{0<a[4]&&(a[4]-=50);if(10>a[5]){0<a[10]*(a[9]-a[3])&&(a[3]=2==a[5]?sa(a,Va||[0,0]):4==a[5]?a[3]+(a[9]+a[11]):sa(a,h),a[10]=a[3]>a[9]?a[11]:-a[11]);y=Ea(a);a[9]=4==a[5]?a[9]+a[10]*
t:3!=a[5]||y&&3==y[5]?a[9]+(y?-1:1)*a[10]:a[9]+a[10];5==a[5]&&(a[6]-=t/10);if(5<a[5]&&10>a[5]&&(a[13]-=dt,0>a[13])){a=[40*(~~(a[0]/40)+.5),40*(~~(a[1]/40)+.5),a[5]+4];console.log(a);U.push([a[0],a[1],1,1,a]);D.splice(q,1);break a}4!=a[5]?(a[0]+=Math.cos(a[9])*t*a[12],a[1]+=Math.sin(a[9])*t*a[12]):(1>a[13][6]&&(a[10]*=.99),a[15]=80*(-Math.cos(a[16])+1.2),a[16]+=t/200,a[0]=a[13][0]+Math.cos(a[9])*a[15],a[1]=a[13][1]+Math.sin(a[9])*a[15])}else{a[9]-=t;12<=a[5]&&(a[3]+=a[12]*t);if(0>a[9]&&!J)ib[a[5]](a);
a[10]+=dt*a[11];q=a[0];y=a[1];u=a[10];l=~~(q/40);m=~~(y/40);p=Math.ceil(u/40);for(k=m-p;k<m+p;k++)if("undefined"!=typeof F[k])for(var r=l-p;r<l+p;r++)1==F[k][r]||Ba(40*(k+.5)-y,40*(r+.5)-q)>=u||(F[k][r]=1)}q=Oa(a);la[q]=la[q]||[];la[q].push(a)}}if(0<V.length&&M>V[0])switch(b=Ja[V.splice(0,1)[0]],b.splice(0,1)[0]){case 0:U.push([b[0],b[1],1,1,b]);break;case 1:b[0].play();break;case 2:B=b;break;case 3:K(b[0]);break;case 4:b[0].I=b[1];138==b[1]&&(b[0].stop(),b[0].play());break;case 5:Ka=b[0]}else 0==
V.length&&(Ja[M+7500]=[840*Math.random(),840*Math.random(),6],N=5,V.push(M+7500));for(b=0;b<U.length;b++)a=U[b],a[2]-=dt,0>a[2]&&(D.push(R(a[4])),9<a[4][2]&&(N=10,K(jb)),3==a[4][2]&&(Va=D[D.length-1]),U.splice(b,1))}e.save();b=dt;e.fillStyle="rgba(0,0,0,0.1)";e.fillRect(0,0,800,600);e.fillStyle=Ga(180,0,185,0,185,0,1);for(a=0;6>a;a++)e.fillRect(800*Math.random(),600*Math.random(),2,2);e.save();e.strokeStyle="rgb(51,193,178)";e.beginPath();shakeScreen=J?[0,0]:[ha(C[2],2),ha(C[2],2)];e.translate(shakeScreen[0],
shakeScreen[1]);e.fillStyle="rgba(26,10,44,"+(.2-(0<h[8]?.1:0))+")";e.translate(n[0],n[1]);e.fillRect(0,0,840,840);for(a=0;21>=a;a++)e.moveTo(40*a,0),e.lineTo(40*a,840),e.moveTo(0,40*a),e.lineTo(840,40*a);e.closePath();e.stroke();e.restore();e.save();e.beginPath();e.fillStyle="rgba(10,4,28,1)";e.strokeStyle="rgba(38,82,255,1)";for(q=0;21>q;q++)for(a=0;21>a;a++)0!=F[q][a]&&(e.fillRect(40*a+n[0]+shakeScreen[0],40*q+n[1]+shakeScreen[1],40,40),e.strokeRect(40*a+n[0]+shakeScreen[0],40*q+n[1]+shakeScreen[1],
40,40));e.fill();e.closePath();e.stroke();e.restore();e.save();e.beginPath();for(a=0;a<U.length;a++)q=U[a],y=q[2],y/=q[3],y=1*y*(y-2)+1,e.strokeStyle="rgba(38,82,255,"+y+")",e.fillRect(q[0]+n[0]+shakeScreen[0]-40*y/2,q[1]+n[1]+shakeScreen[1]-40*y/2,40*y,40*y);e.closePath();e.fill();e.stroke();e.restore();e.save();e.translate(h[0]+n[0]+ha(C[2],1),h[1]+n[1]+ha(C[2],1));e.rotate(h[3]+Math.PI/2);e.lineWidth=3;e.strokeStyle="rgb(201,133,187)";e.beginPath();Fa(Ia[0],Ia[1],h[2]);e.closePath();e.stroke();
e.restore();e.save();for(a=0;a<D.length;a++)if(u=D[a],!(20>u[0]+n[0]||u[0]+n[0]>z-20||20>u[1]+n[1]||u[1]+n[1]>E-20)){q=u[0]+n[0]+shakeScreen[0]+(.5<Math.random()?1:-1)*u[4]/40;y=u[1]+n[1]+shakeScreen[1]+(.5<Math.random()?1:-1)*u[4]/40;e.translate(q,y);e.beginPath();if(10>u[5])e.strokeStyle="hsla("+36*u[5]+",50%,70%,0.6)",e.lineWidth=3,e.rotate(u[9]),Fa(u[7],u[8],u[2]),e.rotate(-u[9]);else if(14==u[5]){l="hsla("+20*u[3]+",50%,60%, 0.5)";e.lineWidth=2;e.beginPath();e.strokeStyle=0<u[4]?"rgba(180,0,50,0.3)":
l;l=u[2]/3.5;e.arc(0,0,l/2,0,2*Math.PI,!1);e.stroke();e.beginPath();e.bezierCurveTo(-l,0,0,-l,l,0);e.bezierCurveTo(l,0,0,l,-l,0);e.stroke();e.rotate(u[3]);for(m=0;6>m;m++)p=G[2*m],k=G[2*m+1],e.beginPath(),e.arc(4*p*l,4*k*l,l,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.arc(2*p*l,2*k*l,l,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.moveTo(p*l*4,k*l*4),e.lineTo(4*l*G[(2*m+2)%12],4*l*G[(2*m+3)%12]),e.lineTo(4*l*G[(2*m+6)%12],4*l*G[(2*m+7)%12]),e.moveTo(p*l*2,k*l*2),e.lineTo(2*l*G[(2*m+2)%12],2*l*G[(2*m+
3)%12]),e.lineTo(2*l*G[(2*m+6)%12],2*l*G[(2*m+7)%12]),e.stroke();e.beginPath();e.rotate(-u[3])}else for(e.lineWidth=2,l=(ma[u[5]]-u[9])/ma[u[5]],l=0<u[4]?-55:~~(200*l)*Wa[l.toFixed(4)],e.strokeStyle=0<u[4]?"#0ff":0==l?"#66A":"#559",m=0;m<u[7].length;m++){var p=u[7][m],k=u[8][m],r=u[2],A=[80+u[4],55+l,130+~~(l/2),0<u[4]?.9:.4];e.beginPath();e.fillStyle="rgba("+A+")";Fa(p,k,r);e.closePath();e.fill();e.stroke()}e.closePath();e.stroke();e.translate(-q,-y)}e.closePath();e.restore();e.save();e.fillStyle=
"rgb(40,145,160)";for(a=0;a<ca.length;a++)q=ca[a],20>q[0]+n[0]||q[0]+n[0]>z-20||20>q[1]+n[1]||q[1]+n[1]>E-20||(e.beginPath(),e.arc(q[0]+n[0],q[1]+n[1],q[2],0,2*Math.PI,!1),e.closePath(),e.fill());e.restore();e.save();e.fillStyle=Ga(125,50,125,50,125,50,1);for(a=0;a<ja.length;a++)q=ja[a],5>q[0]+n[0]||q[0]+n[0]>z-5||5>q[1]+n[1]||q[1]+n[1]>E-5||(e.beginPath(),e.fillStyle=Ga(125,0,125,100,125,100,q[3]/100),e.arc(q[0]+n[0],q[1]+n[1],2,0,2*Math.PI,!1),e.closePath(),e.fill());e.restore();e.save();e.lineWidth=
2;e.translate(C[0],C[1]);e.strokeStyle="#F952FF";h[5]+=25*b*(8*C[2]+1);h[5]%=360;e.translate(-10,-10);e.beginPath();e.moveTo(0,10);e.lineTo(20,10);e.moveTo(10,0);e.lineTo(10,20);e.closePath();e.stroke();e.restore();e.save();ga(Ka,401,501,14,"#90702F");ga(Ka,402,502,14,"#D6AE45");J&&(e.fillStyle="rgba(0,0,0,0.6)",e.fillRect(0,0,840,840),ga("game over",400,240,20,"#FFF"),ga("game over",401,240,20,"#2FF"),ga("press f5",400,290,16,"#FFF"),ga("press f5",401,290,16,"#2FF"));Da(M.toFixed(0),750,60,16,"#2F2");
Da(M.toFixed(0),751,61,16,"#FFF");e.restore();e.restore();b=g;f.bindTexture(f.TEXTURE_2D,Xa);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,b);N--;for(b=0;b<B.length;b++)B[b]--;P(H);fa(qa);f.uniform1i(x(qa,"t"),O(Xa));f.uniform1f(x(qa,"time"),Ha/60%180);f.uniform3fv(x(qa,"colors"),[0<N+1||0<B[0]?1:0,0<N+2||0<B[1]?1:0,0<N||0<B[2]?1:0]);f.drawArrays(f.TRIANGLES,0,6);P(da);fa(va);f.uniform1i(x(va,"t"),O(H[1]));f.uniform1f(x(va,"time"),0<N||0<B[3]?15:0);f.drawArrays(f.TRIANGLES,0,6);P(H);fa(wa);
f.uniform1i(x(wa,"t"),O(da[1]));f.uniform1f(x(wa,"time"),0<N+1||0<B[4]?1:0);f.drawArrays(f.TRIANGLES,0,6);P(da);fa(xa);f.uniform1i(x(xa,"t"),O(H[1]));f.uniform1f(x(xa,"rand"),-.5);f.drawArrays(f.TRIANGLES,0,6);P(H);fa(ya);f.uniform1i(x(ya,"t"),O(da[1]));f.uniform1f(x(ya,"slit_h"),0<N||0<B[5]?9:1);f.drawArrays(f.TRIANGLES,0,6);P(da);fa(za);f.uniform1i(x(za,"t"),O(H[1]));f.uniform1f(x(za,"time"),Ha);f.drawArrays(f.TRIANGLES,0,6);P(H);fa(La);f.uniform1i(x(La,"t"),O(da[1]));f.drawArrays(f.TRIANGLES,0,
6);f.bindFramebuffer(f.FRAMEBUFFER,null);f.drawArrays(f.TRIANGLES,0,6);f.flush();J||(M+=1E3*dt*(0<h[8]?.3:1));requestAnimationFrame(Ra)}var Ca=new function(){this.F=new Za;var b,a,e,f,h,l,m,p,k,n,r,x;this.r=function(){var a=this.F;f=100/(a.f*a.f+.001);h=100/(a.g*a.g+.001);l=1-a.h*a.h*a.h*.01;m=-a.i*a.i*a.i*1E-6;a.a||(r=.5-a.n/2,x=5E-5*-a.o);p=1+a.l*a.l*(0<a.l?-.9:10);k=0;n=1==a.m?0:(1-a.m)*(1-a.m)*2E4+32};this.V=function(){this.r();var f=this.F;b=f.b*f.b*1E5;a=f.c*f.c*1E5;e=f.e*f.e*1E5+12;return 3*
((b+a+e)/3|0)};this.U=function(A,C){var v=this.F,D=1!=v.s||v.v,z=v.v*v.v*.1,E=1+3E-4*v.w,B=v.s*v.s*v.s*.1,F=1+1E-4*v.t,G=1!=v.s,K=v.x*v.x,Q=v.g,L=v.q||v.r,U=v.r*v.r*v.r*.2,N=v.q*v.q*(0>v.q?-1020:1020),S=v.p?((1-v.p)*(1-v.p)*2E4|0)+32:0,aa=v.d,Z=v.j/2,fa=v.k*v.k*.01,O=v.a,P=b,ha=1/b,ia=1/a,ja=1/e,v=5/(1+v.u*v.u*20)*(.01+B);.8<v&&(v=.8);for(var v=1-v,T=!1,ca=0,H=0,I=0,ga=0,R=0,J,M=0,Y,na=0,oa,da=0,w,ka=0,pa,la=0,ba=Array(1024),V=Array(32),ea=ba.length;ea--;)ba[ea]=0;for(ea=V.length;ea--;)V[ea]=2*Math.random()-
1;for(ea=0;ea<C;ea++){if(T)return ea;S&&++ka>=S&&(ka=0,this.r());n&&++k>=n&&(n=0,f*=p);l+=m;f*=l;f>h&&(f=h,0<Q&&(T=!0));Y=f;0<Z&&(la+=fa,Y*=1+Math.sin(la)*Z);Y|=0;8>Y&&(Y=8);O||(r+=x,0>r?r=0:.5<r&&(r=.5));if(++H>P)switch(H=0,++ca){case 1:P=a;break;case 2:P=e}switch(ca){case 0:I=H*ha;break;case 1:I=1+2*(1-H*ia)*aa;break;case 2:I=1-H*ja;break;case 3:I=0,T=!0}L&&(N+=U,oa=N|0,0>oa?oa=-oa:1023<oa&&(oa=1023));D&&E&&(z*=E,1E-5>z?z=1E-5:.1<z&&(z=.1));pa=0;for(var ma=8;ma--;){na++;if(na>=Y&&(na%=Y,3==O))for(J=
V.length;J--;)V[J]=2*Math.random()-1;switch(O){case 0:w=na/Y<r?.5:-.5;break;case 1:w=1-na/Y*2;break;case 2:w=na/Y;w=6.28318531*(.5<w?w-1:w);w=1.27323954*w+.405284735*w*w*(0>w?1:-1);w=.225*((0>w?-1:1)*w*w-w)+w;break;case 3:w=V[Math.abs(32*na/Y|0)]}D&&(J=M,B*=F,0>B?B=0:.1<B&&(B=.1),G?(R+=(w-M)*B,R*=v):(M=w,R=0),M+=R,ga+=M-J,w=ga*=1-z);L&&(ba[da%1024]=w,w+=ba[(da-oa+1024)%1024],da++);pa+=w}pa*=.125*I*K;A[ea]=1<=pa?32767:-1>=pa?-32768:32767*pa|0}return C}},ka,Aa,Q,K,ta=window.AudioContext||window.webkitAudioContext;
if(ta){ka=new ta;Aa=ka.createDynamicsCompressor();var r=ka.createGain();r.gain.value=window.chrome?.2:.4;Aa.connect(r);r.connect(ka.destination);Q=function(b){var a=[];$a(b,ka,function(b){a.push(b)});return a};K=function(b){if(b[0]){var a=ka.createBufferSource();a.context.sampleRate+=~~(500*Math.random());a.buffer=b[0];a.start(0);a.connect(Aa);setTimeout(function(){a.disconnect(Aa)},1E3*b[0].duration+300)}}}else Q=K=function(){};var kb=440*Math.pow(Math.pow(2,1/12),-9),lb=/^[0-9.]+$/,ab=/\s+/,mb=
/(\d+)/,Ya={};"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach(function(b,a){b.split("-").forEach(function(b){Ya[b]=a})});I.M=function(b){b=b.split(mb);return kb*Math.pow(Math.pow(2,1/12),Ya[b[0]])*Math.pow(2,(b[1]||4)-4)};I.L=function(b){return lb.test(b)?parseFloat(b):b.toLowerCase().split("").reduce(function(a,b){return a+("w"===b?4:"h"===b?2:"q"===b?1:"e"===b?.5:"s"===b?.25:0)},0)};A.prototype.J=function(){var b=this.gain=this.C.createGain();[["bass",100],["mid",1E3],
["treble",2500]].forEach(function(a,e){e=this[a[0]]=this.C.createBiquadFilter();e.type="peaking";e.frequency.value=a[1];b.connect(b=e)}.bind(this));b.connect(this.C.destination)};A.prototype.push=function(){Array.prototype.forEach.call(arguments,function(b){this.B.push(b instanceof I?b:new I(b))}.bind(this));return this};A.prototype.createOscillator=function(){this.stop();this.A=this.C.createOscillator();this.K?this.A.setPeriodicWave(this.C.createPeriodicWave.apply(this.C,this.K)):this.A.type=this.Y||
"square";this.A.connect(this.gain);return this};A.prototype.R=function(b,a){var e=60/this.I*this.B[b].duration,f=e*(1-(this.D||0));this.G(this.B[b].frequency,a);this.H&&this.B[b].frequency&&this.S(b,a,f);this.G(0,a+f);return a+e};A.prototype.N=function(b){return this.B[b<this.B.length-1?b+1:0]};A.prototype.O=function(b){return b-Math.min(b,60/this.I*this.H)};A.prototype.S=function(b,a,e){var f=this.N(b);this.G(this.B[b].frequency,a+this.O(e));this.P(f.frequency,a+e)};A.prototype.G=function(b,a){this.A.frequency.setValueAtTime(b,
a)};A.prototype.P=function(b,a){this.A.frequency.linearRampToValueAtTime(b,a)};A.prototype.play=function(b){b="number"===typeof b?b:this.C.currentTime;this.createOscillator();this.A.start(b);this.B.forEach(function(a,e){b=this.R(e,b)}.bind(this));this.A.stop(b);this.A.onended=this.loop?this.play.bind(this,b):null;return this};A.prototype.stop=function(){this.A&&(this.A.onended=null,this.A.disconnect(),this.A=null);return this};var bb=[8767,518,1115,1039,1126,1133,1149,7,1151,1135,5123,1143,5391,57,
4367,121,113,1085,1142,4361,30,2672,56,694,2230,63,1139,2111,3187,1133,4353,62,8752,10294,10880,4736,8713,0,16,1088,256],la={},f=c.getContext("webgl")||c.getContext("experimental-webgl"),e=g.getContext("2d"),z=800,E=600;d.style.webkitTransformOrigin=d.style.transformOrigin="0 0";g.width=c.width=z;g.height=c.height=E;c.style.top="0px";c.style.left="0px";document.oncontextmenu=function(b){b.preventDefault()};f.viewport(0,0,z,E);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!0);r=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,
r);f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),f.STATIC_DRAW);var za=Z("precision highp float;uniform vec2 dim;uniform sampler2D t;varying vec2 uv;uniform float time;void main(){vec2 a=uv*dim;vec4 b=texture2D(t,uv);vec4 c=vec4(0.0);float d=0.02*sin(time)+0.25;float e=0.05;for(int f=0;f<9;f++){float g=float(mod(float(f),4.0));float h=float(f/3);vec2 i=vec2(a.x+g,a.y+h);vec2 j=vec2(a.x-g,a.y+h);vec2 k=vec2(a.x+g,a.y-h);vec2 l=vec2(a.x-g,a.y-h);c+=texture2D(t,i/dim)*e;c+=texture2D(t,j/dim)*e;c+=texture2D(t,k/dim)*e;c+=texture2D(t,l/dim)*e;}b+=c;vec4 m=texture2D(t,uv+vec2((-15.0/dim.x)*d,0));vec4 n=texture2D(t,uv+vec2((8.0/dim.x)*d,0));vec4 o=texture2D(t,uv+vec2((-7.5/dim.x)*d,0));b.r=b.r+n.r*max(1.0,sin(uv.y*dim.y*1.2)*2.5)*d;b.b=b.b+m.b*max(1.0,sin(uv.y*dim.y*1.2)*2.5)*d;b.g=b.g+o.g*max(1.0,sin(uv.y*dim.y*1.2)*2.5)*d;vec2 p=uv*sin(time);float q=fract(sin(dot(p.xy,vec2(12.9898,78.233)))*43758.5453);vec3 r=vec3(q);b.rgb=mix(b.rgb,r,0.08);gl_FragColor.rgba=b;}");
f.uniform2f(x(za,"dim"),z,E);var La=Z("precision highp float;uniform sampler2D t;uniform vec2 dim;varying vec2 uv;void main(){vec2 a=uv*dim;a-=dim/2.0;float b=length(a);if(b<600.0){float c=b/600.0;a*=mix(1.0,smoothstep(0.0,600.0/b,c),0.125);}a+=dim/2.0;vec4 d=texture2D(t,a/dim);float e=distance(uv,vec2(0.5,0.5));d.rgb*=smoothstep(0.8,0.35*0.799,e);gl_FragColor=d;}");f.uniform2f(x(La,"dim"),z,E);var qa=Z("precision mediump float;uniform vec2 dim;uniform sampler2D t;varying vec2 uv;uniform float time;uniform vec3 colors;void main(void){float a=0.0+sin(time);vec4 b=texture2D(t,uv);vec4 c=texture2D(t,uv+vec2((-15.0/dim.x),0));vec4 d=texture2D(t,uv+vec2((15.0/dim.x),0));vec4 e=texture2D(t,uv+vec2((-7.5/dim.x),0));if(colors.r==1.0){b.r=b.r+d.r*max(1.0,sin(uv.y*dim.y*1.2))*a;}if(colors.g==1.0){b.b=b.b+c.b*max(1.0,sin(uv.y*dim.y*1.2))*a;}if(colors.b==1.0){b.g=b.g+e.g*max(1.0,sin(uv.y*dim.y*1.2))*a;}gl_FragColor.rgba=b.rgba;}");
f.uniform2f(x(qa,"dim"),z,E);var va=Z("precision mediump float;uniform vec2 dim;uniform sampler2D t;varying vec2 uv;uniform float time;void main(void){float a=5.0;float b=0.5;vec2 c=uv*dim;vec2 d=c+vec2(floor(sin(c.y/a*time+time*time))*b*time,0);d=d/dim;vec4 e=texture2D(t,d);gl_FragColor.rgba=e.rgba;}");f.uniform2f(x(va,"dim"),z,E);var wa=Z("precision mediump float;uniform vec2 dim;uniform sampler2D t;varying vec2 uv;uniform float time;void main(void){float a=0.3;float b=0.3;float c=10.00*time;float d=10.00*time;float e=dim.x;float f=dim.y;vec2 g=uv*dim;vec2 h=vec2(max(3.0,min(float(e),g.x+sin(g.y/(153.25*a*a)*a+a*c+b*3.0)*d)),max(3.0,min(float(f),g.y+cos(g.x/(251.57*a*a)*a+a*c+b*2.4)*d)-3.0));vec4 i=texture2D(t,h/dim);gl_FragColor.rgba=i.rgba;}");
f.uniform2f(x(wa,"dim"),z,E);var xa=Z("precision mediump float;uniform vec2 dim;uniform sampler2D t;varying vec2 uv;uniform float time;uniform float rand;void main(void){vec4 a=texture2D(t,uv);gl_FragColor.rgba=a.rgba;}");f.uniform2f(x(xa,"dim"),z,E);var ya=Z("precision mediump float;uniform vec2 dim;uniform sampler2D t;varying vec2 uv;uniform float slit_h;void main(void){vec2 a=uv*dim;vec2 b=vec2(3.0+floor(a.x/slit_h)*slit_h,a.y);vec4 c=texture2D(t,b/dim);gl_FragColor.rgba=c.rgba;}");f.uniform2f(x(ya,
"dim"),z,E);var H=Na(),da=Na(),Xa=Ma(),C=[0,0,0];c.onmousedown=function(b){C[2]=3==b.which?0:1;C[3]=3==b.which?1:0;b.preventDefault()};c.onmouseup=function(b){C[2]=0;C[3]=0;b.preventDefault()};c.onmousemove=function(b){0<B[6]||(C[0]=b.offsetX,C[1]=b.offsetY)};var ia=0,S={65:1,87:2,68:4,83:8};document.onkeydown=function(b){var a=b.keyCode||b.which;S[a]&&(ia|=S[a],b.preventDefault())};document.onkeyup=function(b){var a=b.keyCode?b.keyCode:b.which;ia&S[a]&&(ia^=S[a],b.preventDefault())};var r=new ta,
aa,ba,L,T;g2e="G2 e";c2e="C2 e";lead="Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Bb1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s;Ab1 s;D2 s".split(";");harmony=[g2e,"G2b e",g2e,"G2b e",g2e,"G2b e",g2e,"G2b e",c2e,"G2b e",c2e,"G2b e",c2e,"G2b e",c2e,"G2b e"];bass2="- w;D1 s;- s;D1 e;- q;- m;- w".split(";");bass=basebass=["C1 e","- e","A1 e","- e"];aa=new A(r,138,lead);ba=new A(r,138,harmony);L=new A(r,138,bass);T=new A(r,138,
bass2);aa.D=.81;ba.D=.55;L.D=.05;L.H=.35;T.D=.05;aa.gain.gain.value=.12;ba.gain.gain.value=.09;L.gain.gain.value=.11;T.gain.gain.value=.1;window.W=aa;window.X=L;var Ta=Pa([0,,.12,.14,.3,.8,,-.3399,.04,,,-.04,,.51,-.02,,-.74,,.21,.24,,,.02,.41],6),jb=Q([1,,.38,,.03,.03,,.8799,.96,.9411,.9785,-.9219,.82,.7513,.6049,.8,-.6041,-.8402,.28,.7,.78,.1423,-.7585,.5]),hb=Q([3,.0597,.11,.2,.2513,.5277,,.5841,-.0248,-.076,.5312,-.2978,.7065,-.9091,.4202,.966,.7036,.4575,1,-.9064,.6618,.0266,-.0655,.42]),fb=Q([2,
,.09,.06,.45,.27,.02,-.28,.82,.41,.58,-.88,.07,.448,-.355,1,.54,-.073,1,,,,,.42]),gb=Q([3,.002,.6302,.499,.0804,.5224,,-.0324,4E-4,.5448,,-.7762,-.1765,.6762,-.4386,.7747,-.0347,-.2051,.931,-.0732,.4693,.1444,,.42]),eb=Q([1,.145,.2094,.4645,.4954,.7134,,-.1659,-.8866,.9733,,-.572,-.7927,-.1186,.4699,.6044,.4604,.1762,.9998,.0236,.1554,,.659,.42]);Q([1,.0076,.66,,,.09,,.96,.32,.1,.97,-1,,.0615,-.1587,1,,-.02,.83,.12,.23,.0231,-.02,.96]);for(var Ua=Pa([3,.0691,.183,.0949,.5678,.46,,-1E-4,,,,-.542,-.2106,
-.2402,-.1594,,-.3133,-.0707,.1592,-.4479,.5788,.0169,-.919,.42],8),J=!1,Ha=0,F=[],n=[-20,-120,370,270],h=[420,420,16,0,150,0,0,12,0,0],Ia=[[0,1,0,-1],[-1,1,.5,1]],ca=[],D=[],ja=[],Ka="",Sa=Math.PI/2,M=0,N=0,B=[0,0,0,0,0,0,0],Ja={500:[1,T],2500:[0,420,220,10],8999:[5,"what are you doing?"],10500:[1,L],11E3:[0,220,220,10],18E3:[0,620,620,10],18001:[5,""],25E3:[0,620,220,10],31E3:[0,220,620,10],37E3:[0,420,460,11],37500:[1,aa],46E3:[5,"you can't stop us!"],48500:[2,10,0,0,0,10,10,10],49E3:[2,10,10,
10,15,10,20,10],49001:[4,L,1],49002:[4,aa,1],49003:[4,T,1],50004:[2,60,60,68,55,50,45,60],51E3:[4,L,138],51001:[4,aa,138],51002:[4,T,138],51003:[5,"we are perfect!"],52E3:[0,180,420,11],53E3:[0,580,420,10],55550:[5,""],61E3:[0,420,660,11],63E3:[0,420,260,10],7E4:[0,660,420,11],72E3:[0,260,420,10],78E3:[0,420,180,11],88501:[2,1E3,0,0,0,0,0,10],92E3:[0,420,380,12],92500:[1,ba],108050:[5,"do you think we are an error?"],112050:[5,"you are a glitch!"],115E3:[0,420,60,12],120050:[5,""],121E3:[0,60,420,
12],126E3:[0,780,420,12],131E3:[0,420,780,12],154499:[5,"your limited dimension..."],160001:[2,100,100,50,20,20,100,10],160500:[5,"is just a plane"],164600:[0,420,60,10],164601:[0,500,100,10],164602:[0,500,180,10],164603:[0,420,220,10],164604:[0,340,180,10],164605:[0,340,100,10],18E4:[0,420,140,13],21E4:[0,420,420,14],11E5:[0,500,260,10]},Va=void 0,V=Object.keys(Ja).map(function(b){return parseInt(b)}),r=0;21>r;r++){F.push([]);for(var ra=0;21>ra;ra++)F[r].push([])}for(var U=[],cb=[[15,0,0,0,1,[1,
.25,-1,.25],[0,-.75,0,.75],0,3,.1,1.1],[15,0,0,1,4,[1,.3,0,-2,0,.3],[0,1,.3,0,-.3,-1],0,3,.05,.8],[8,0,0,2,2,[1,.25,-1,.25],[0,-.5,0,.5],0,3.5,.15,1.6],[20,0,0,3,9,[0,.25,.75,.75,1,.75,.75,.25,0,-.25,-.75,-.75,-1,-.75,-.75,-.25],[-1,-.75,-.75,-.25,0,.25,.75,.75,1,.75,.75,.25,0,-.25,-.75,-.75],0,1,.12,1.05],[12,0,0,4,5,[0,.25,1,.25,0,-.25,-1,-.25],[-1,-.25,0,.25,1,.25,0,-.25],0,3,.03,2.5,0,0,0],[3,0,0,5,150,[1,-1,-1],[0,1,-1],0,0,0,1.4],[16,0,0,6,9,[1,.25,-1,.25],[0,-.75,0,.75],0,0,0,.6,3.5],[18,0,
0,7,8,[1,.25,-1,.25],[0,.75,0,-.75],0,0,0,.8,2.5],[20,0,0,8,7,[1,.25,-1,.25],[0,.75,0,-.75],0,0,0,1.2,1.5],,[20,0,0,10,9,[[-1,0,0],[0,0,1],[-1,1,0]],[[-1.5,-.5,.5],[-.5,.5,-1.5],[-1.5,-1.5,-.5]],100,0,7],[20,0,0,11,10,[[-1,0,0,-1],[1,0,0,1],[-1,0,1,0],[-1,0,1,0],[-1,0,0,-1],[1,0,0,1]],[[-1.25,-.5,.8,.25],[-1.25,-.5,.8,.25],[-1.25,-.5,-1.25,-1.8],[.25,-.5,.25,.8],[.25,-.5,-1.8,-1.25],[.25,-.5,-1.8,-1.25]],100,0,6],[32,0,0,12,15,[[-.5,0,.5,0],[-.5,0,0],[.5,0,0],[-.5,0,0],[.5,0,0]],[[-.75,-1,-.75,-.5],
[-.75,-.5,.25],[-.75,-.5,.25],[-.75,-1.75,-.5],[-.75,-1.75,-.5]],.9,0,4,.004],[48,0,0,13,30,[[0,-.75,0],[0,.75,0],[-.75,.75,0],[-.75,.75,0],[-.35,.35,0]],[[-1,.5,0],[-1,.5,0],[.5,.5,0],[-.5,-.5,1],[.25,.25,-.5]],.9,0,13,.1],[100,0,0,14,200,[],[],.9,0,60,.003,1,0,[6,7,6,7,8]]],ma={10:2800,11:2600,12:60,13:200},G=[],r=0;6>r;r++)ra=(r-3)*Math.PI/3+Math.PI/6,G.push(Math.cos(ra),Math.sin(ra));for(var Wa={},r=0;1E4>r;r++)Wa[(r/1E4).toFixed(4)]=db(r/1E4);var ib={10:function(b){for(var a=0;9>a;a++)if(4!=
a){var e=b[0]+40*(a%3-1),f=b[1]+40*(~~(a/3)-1);U.push([e,f,.65,.65,[e,f,1==a?1:0]])}b[9]=ma[10]},11:function(b){for(var a=0;12>a;a++)if(4!=a){var e=b[0]+40*(a%3-1),f=b[1]+40*(~~(a/3)-1);U.push([e,f,.65,.65,[e,f,1==a?3:2]])}b[9]=ma[11]},12:function(b){for(var a=0;2>a;a++){var e=R([b[0],b[1],5]);e[9]=b[3]+a*Math.PI;D.push(e)}b[9]=ma[12]},13:function(b){for(var a=0;6>a;a++){var e=R([b[0],b[1],5]);e[9]=b[3]+(a-3)*Math.PI/3;e[12]+=1.2;D.push(e)}b[9]=100},14:function(b){for(var a=0;6>a;a++){var e=R([b[0],
b[1],5]);e[9]=b[3]+(a-3)*Math.PI/3+Math.PI/6;e[12]-=.6;D.push(e)}0==b[13]%16&&(e=R([b[0],b[1],b[15][b[14]%b[15].length]]),e[9]=b[3]/2,D.push(e),b[14]++);if(0==b[13]%100)for(a=0;6>a;a++)Qa(b,a);b[9]=70;b[13]++}},ua;requestAnimationFrame(Ra)})();
